# 币安活期理财余额查询工具

这个工具可以帮你查询币安交易所活期赚币（Simple Earn Flexible）账户的总余额，并以USDT计价显示。

## 功能特点

- 🔍 自动获取所有活期赚币持仓
- 💰 实时价格查询，精确计算USDT价值
- 📊 详细显示每个资产的持仓和价值
- 🛡️ 安全的API密钥管理（使用环境变量）
- ⚡ 完善的错误处理和用户友好的提示

## 安装依赖

```bash
pip install -r requirements.txt
```

或者直接安装：

```bash
pip install ccxt
```

## 配置API密钥

### 方法1：使用环境变量（推荐）

```bash
# Linux/Mac
export BINANCE_API_KEY="your_api_key_here"
export BINANCE_SECRET_KEY="your_secret_key_here"

# Windows
set BINANCE_API_KEY=your_api_key_here
set BINANCE_SECRET_KEY=your_secret_key_here
```

### 方法2：在代码中直接设置（不推荐）

可以修改脚本，直接在代码中设置API密钥，但这样存在安全风险。

## API权限要求

确保你的币安API密钥具有以下权限：
- ✅ 现货与杠杆交易 (Spot & Margin Trading)
- ✅ 读取权限 (Read)

**注意**：不需要交易权限，只需要读取权限即可。

## 使用方法

### 完整版脚本

```bash
python binance_flexible_balance.py
```

功能：
- 面向对象设计，代码结构清晰
- 使用Decimal进行精确计算
- 详细的异常处理和日志
- 完整的类型注解

### 简化版脚本

```bash
python simple_balance_checker.py
```

功能：
- 代码简洁，易于理解和修改
- 核心功能完整
- 适合快速查询

## 输出示例

```
🏦 币安活期理财余额查询
============================================================
🔍 正在查询活期赚币持仓...
✅ 成功获取 3 个活期持仓
💰 正在获取价格信息...

📋 活期持仓详情:
--------------------------------------------------
💎 USDT: 1000.5000
💎 BTC: 0.0150
💎 ETH: 0.5000

💰 价值计算:
--------------------------------------------------
USDT: 1000.50 USDT
BTC: 0.0150 × $43250.00 = $648.75 USDT
ETH: 0.5000 × $2580.00 = $1290.00 USDT

============================================================
📊 活期账户总余额: $2939.25 USDT
============================================================
```

## 常见问题

### 1. API密钥验证失败
- 检查API密钥是否正确
- 确认API密钥权限设置
- 检查IP白名单设置

### 2. 网络连接问题
- 检查网络连接
- 如果在中国大陆，可能需要使用代理

### 3. 权限不足
- 确保API密钥开启了现货交易权限
- 检查是否有Simple Earn相关权限

### 4. 价格获取失败
- 某些资产可能没有USDT交易对
- 脚本会跳过无法获取价格的资产

## 安全建议

1. **永远不要在代码中硬编码API密钥**
2. **使用环境变量存储敏感信息**
3. **定期更换API密钥**
4. **只授予必要的最小权限**
5. **不要在公共仓库中提交包含API密钥的代码**

## 技术说明

- 使用 `ccxt` 库统一处理交易所API
- 调用币安API端点：`GET /sapi/v1/simple-earn/flexible/position`
- 实时获取价格信息进行USDT换算
- 支持所有有USDT交易对的资产

## 许可证

本项目仅供学习和个人使用，请遵守币安API使用条款。
